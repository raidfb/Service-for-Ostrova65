function t_quiz__step_manager(t){var t,n=(t=t||{steps:[],activeStepClass:""}).steps,e=t.activeStepClass||"t-step-form__step_active",i=t.animation,o=t.enableConditionals,a=t.enableAutoStepChange,r=!1,s,u=300,c={index:-1,step:null};function l(t){t.element.classList.add(e)}function p(t){t.element.classList.remove(e)}function f(t){var n=t.element.querySelectorAll(".t-quiz__step__input"),e=n.length&&Array.from(n).every((function(t){return"true"===t.getAttribute("data-hidden-by-condition")}));return"true"===t.element.getAttribute("data-hidden-by-condition")||e}function m(){var t=n.findIndex((function(t,n){return n>c.index&&!f(t)})),e=Math.min(n.length,t);return{index:e,step:n[e]}}function d(){for(var t=c.index,e=-1===t?n.length-1:t-1,i=e;i>=0;i--){var o;if(!f(n[i])){e=i;break}}var a=Math.max(0,e);return{index:a,step:n[a]}}function v(t){return n.filter((function(n){return-1!==t.indexOf(n.type)&&!f(n)}))}function y(){var t=v(["step","contacts"]),n=t.indexOf(c.step);return{total:t.length,current:-1===n?null:n+1}}function g(t,n){var e=c.step,i="next"===t?m():d();c=i;var o=A();return x(e,i.step,n),o}function S(){var t=n.filter((function(t){return!f(t)})),e=t.indexOf(c.step),i,o;return t.splice(e+1).every((function(t){return"step"!==t.type&&"contacts"!==t.type}))}function A(){var t;return{type:c.step.type,index:c.index,isFirst:0===c.index,isLast:S(),step:c.step}}function h(){var t=["ri","rd","rs","sb","cb"],e;n.filter((function(n){var e=n.element,i;if(!e.querySelector(".t-quiz__inputs-wrapper")){var o=e.querySelector(".t-input-group");return o&&-1!==t.indexOf(o.getAttribute("data-field-type"))}})).forEach((function(t){var n=Array.prototype.slice.call(t.element.querySelectorAll(".js-tilda-rule"));(n=n.filter((function(t){return!t.classList.contains("t-radio-ownanswer")}))).forEach((function(t){t.addEventListener("change",_)}))}))}function _(){var t;A().isLast||r||(r=!0,s=setTimeout((function(){g("next")}),u))}function C(){a&&(clearTimeout(s),r=!1)}function x(n,o,a){void 0===a&&(a={});var r=t,s=r.onStepChange,u=r.onProgressChange,c=i.callbacks||{},f=c.onAnimationComplete,m=c.onAnimationStart,d=c.onNewStepAnimationStart;if(!i)return n&&p(n),l(o),s&&s(o),u&&u(y()),f&&f(n,o),a.onAnimationComplete&&a.onAnimationComplete(n,o),void C();t_quiz__animateSteps(n,o,{onAnimationStart:function t(n,e){m&&m(n,e),a.onAnimationStart&&a.onAnimationStart(n,e)},onNewStepAnimationStart:function t(n,e){d&&d(n,e),a.onNewStepAnimationStart&&a.onNewStepAnimationStart(n,e),s&&s(e),u&&u(y()),C()},onAnimationComplete:function t(n,e){f&&f(n,e),a.onAnimationComplete&&a.onAnimationComplete(n,e)}},{animation:{in:w(o),out:w(n)},stepActiveClass:e})}function w(t){return t&&"string"!=typeof i?i.type[t.type]||"fade-with-move":i}function L(){o?t_onFuncLoad("t_form__conditionals_initFields",(function(){var n=t_form__conditionals_initFields(t.recId);n.addListeners((function(){t.onProgressChange&&t.onProgressChange(y())})),n.addStateChangeListeners((function(n){t.onConditionalStateChange&&t.onConditionalStateChange(n)})),a&&h(),g("next",{onAnimationComplete:t.onInit})})):(a&&h(),g("next",{onAnimationComplete:t.onInit}))}return{go:g,init:L,getStepsProgress:y,getCurrentStepInfo:A}}function t_quiz__animateSteps(t,n,e,i){var o=700,a=400,r="forwards",s="ease-in-out",u=i||{},c=u.animation,l=void 0===c?{in:"fade-with-move",out:"fade-with-move"}:c,p=u.stepActiveClass,f=function t(){},m=e||{},d=m.onAnimationComplete,v=void 0===d?f:d,y=m.onAnimationStart,g=void 0===y?f:y,S=m.onNewStepAnimationStart,A=void 0===S?f:S,h;if(!!!document.body.animate)return g(t,n),t&&t.element.classList.remove(p),A(t,n),n&&n.element.classList.add(p),void v(t,n);function _(t){var n=t.animate([{opacity:0,pointerEvents:"none"},{opacity:1,pointerEvents:"auto"}],{duration:o,fill:r,easing:s});return n.pause(),n}function C(t){var n=t.animate([{transform:"translateY(15px)",opacity:0,pointerEvents:"none"},{transform:"translateY(0px)",opacity:1,pointerEvents:"auto"}],{duration:o,fill:r,easing:s});return n.pause(),n}function x(t){var n=t.animate([{opacity:1,pointerEvents:"none"},{opacity:0,pointerEvents:"auto"}],{duration:a,fill:r,easing:s});return n.pause(),n}function w(t){var n=t.animate([{transform:"translateY(0)",opacity:1,pointerEvents:"none"},{transform:"translateY(20px)",opacity:0,pointerEvents:"auto"}],{duration:a,fill:r,easing:s});return n.pause(),n}function L(){v(t,n)}function b(){t.element.classList.remove(p),E()}function E(){if(!n)return A(t,n),void L();var e;(e="fade-with-move"===l.in?C(n.element):_(n.element)).finished.then(L),n.element.classList.add(p),e.play(),A(t,n)}function q(){var n;(n="fade-with-move"===l.out?w(t.element):x(t.element)).finished.then(b),n.play()}return g(t,n),t?q():E()}
