window.isMobile = !1;
if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    window.isMobile = !0
}

function t_throttle(fn, threshhold, scope) {
    var last;
    var deferTimer;
    threshhold || (threshhold = 250);
    return function () {
        var context = scope || this;
        var now = +new Date();
        var args = arguments;
        if (last && now < last + threshhold) {
            clearTimeout(deferTimer);
            deferTimer = setTimeout(function () {
                last = now;
                fn.apply(context, args)
            }, threshhold)
        } else {
            last = now;
            fn.apply(context, args)
        }
    }
}

function t282_showMenu(recid) {
    var rec = document.getElementById('rec' + recid);
    if (!rec) return;
    var menu = rec.querySelector('.t282');
    var submenu = rec.querySelector('.t-menusub__container');
    var allRec = document.getElementById('allrecords');
    var isEdit = allRec ? allRec.getAttribute('data-tilda-mode') === 'edit' : !1;
    if (isEdit && submenu) {
        submenu.style.position = 'relative';
        submenu.style.zIndex = '10';
        submenu.style.pointerEvents = 'none'
    }
    var menuLinks = rec.querySelectorAll('.t-menusub__link-item');
    var menuContainer = rec.querySelector('.t282__container');
    var menuAndOverlay = rec.querySelectorAll('.t282__container, .t282__menu__container, .t282__overlay');
    var canBeClickedItems = rec.querySelectorAll('.t282 .t-menuburger, .t282__menu__link:not(.tooltipstered):not(.t282__menu__link_submenu), .t282__overlay');
    var menuBlock = rec.querySelector('.t282__menu__container');
    var menuWrapper = menu.querySelector('.t282__menu__wrapper');
    var menuContainerHeight = menuContainer ? menuContainer.getBoundingClientRect().height : 0;
    var menuBurger = menu ? menu.querySelector('.t-menuburger') : null;
    Array.prototype.forEach.call(canBeClickedItems, function (element) {
        element.addEventListener('click', function () {
            if (element.closest('.t282__menu__link.tooltipstered, .t794__tm-link, .t978__tm-link, .t966__tm-link')) return;
            if (document.body.classList.contains('t282_opened')) {
                if (typeof t_triggerEvent === 'function') t_triggerEvent(document.body, 'popupHidden');
                document.body.classList.remove('t282_opened')
            } else {
                if (typeof t_triggerEvent === 'function') t_triggerEvent(document.body, 'popupShowed');
                document.body.classList.add('t282_opened')
            }
            Array.prototype.forEach.call(menuAndOverlay, function (el) {
                el.style.transform = '';
                if (element.closest('.t-menuburger') && el.closest('.t282__menu__container') && el.classList.contains('t282__closed') && !window.isMobile) {
                    el.style.pointerEvents = 'none';
                    setTimeout(function () {
                        el.style.pointerEvents = ''
                    }, 500)
                }
                var menuContainerHeight = menuContainer ? menuContainer.getBoundingClientRect().height : 0;
                if (element.closest('.t-menuburger') && menuWrapper.clientHeight > menuBlock.clientHeight && !el.classList.contains('t282__closed') && !el.classList.contains('t282__container')) {
                    el.style.transform = 'translateY(calc(-100% - ' + menuContainerHeight + 'px))'
                }
                el.classList.toggle('t282__closed')
            });
            if (menuBlock) menuBlock.style.top = menuContainerHeight + 'px';
            var menuBurger = rec.querySelector('.t-menuburger')
            if (menuBurger) menuBurger.classList.toggle('t-menuburger-opened', document.body.classList.contains('t282_opened'))
            if (element.classList.contains('t-menuburger')) {
                var expandedStatus = element.classList.contains('t-menuburger-opened');
                element.setAttribute('aria-expanded', expandedStatus)
            }
            t282_highlight(recid)
        })
    });
    menu.addEventListener('clickedAnchorInTooltipMenu', function () {
        if (typeof t_triggerEvent === 'function') t_triggerEvent(document.body, 'popupHidden');
        document.body.classList.remove('t282_opened');
        Array.prototype.forEach.call(menuAndOverlay, function (el) {
            el.classList.add('t282__closed')
        })
    });
    Array.prototype.forEach.call(menuLinks, function (link) {
        link.addEventListener('click', function () {
            if (typeof t_triggerEvent === 'function') t_triggerEvent(document.body, 'popupHidden');
            document.body.classList.remove('t282_opened');
            Array.prototype.forEach.call(menuAndOverlay, function (el) {
                el.classList.add('t282__closed');
                if (menuBurger) {
                    menuBurger.classList.remove('t-menuburger-opened');
                    menuBurger.setAttribute('aria-expanded', !1)
                }
            })
        })
    })
}

function t282_changeSize(recid) {
    var rec = document.getElementById('rec' + recid);
    if (!rec) return;
    var menu = rec.querySelector('.t282__container');
    var menuContainer = rec.querySelector('.t282__menu__container');
    var menuWrapper = document.getElementById('nav' + recid);
    var menuHeight = menu ? menu.offsetHeight : 0;
    var menuContainerHeight = menuContainer ? menuContainer.offsetHeight : 0;
    if (menuHeight > document.documentElement.clientHeight - menuContainerHeight) {
        if (menuWrapper) menuWrapper.classList.add('t282__menu_static')
    } else {
        if (menuWrapper) menuWrapper.classList.remove('t282__menu_static')
    }
}

function t282_changeBgOpacityMenu(recid) {
    var rec = document.getElementById('rec' + recid);
    if (!rec) return;
    var menuBlocks = rec.querySelectorAll('.t282__container__bg');
    Array.prototype.forEach.call(menuBlocks, function (menu) {
        var bgColor = menu.getAttribute('data-bgcolor-rgba');
        var bgColorAfterScroll = menu.getAttribute('data-bgcolor-rgba-afterscroll');
        var bgOpacity = menu.getAttribute('data-bgopacity');
        var bgOpacityTwo = menu.getAttribute('data-bgopacity2');
        var menuShadowOpacity = parseInt(menu.getAttribute('data-menushadow'), 10) || 0;
        menuShadowOpacity /= 100;
        var menuShadowCSS = menu.getAttribute('data-menushadow-css');
        menu.style.backgroundColor = window.pageYOffset > 20 ? bgColorAfterScroll : bgColor;
        if ((window.pageYOffset > 20 && bgOpacityTwo === '0') || (window.pageYOffset <= 20 && (bgOpacity === '0.0' || bgOpacity === '0')) || (!menuShadowOpacity && !menuShadowCSS)) {
            menu.style.boxShadow = 'none'
        } else if (menuShadowCSS) {
            menu.style.boxShadow = menuShadowCSS
        } else if (menuShadowOpacity) {
            menu.style.boxShadow = '0px 1px 3px rgba(0,0,0,' + menuShadowOpacity + ')'
        }
    })
}

function t282_highlight(recid) {
    var url = window.location.href;
    var pathname = window.location.pathname;
    var hash = window.location.hash;
    if (url.substr(url.length - 1) === '/') {
        url = url.slice(0, -1)
    }
    if (pathname.substr(pathname.length - 1) === '/') {
        pathname = pathname.slice(0, -1)
    }
    if (pathname.charAt(0) === '/') {
        pathname = pathname.slice(1)
    }
    if (pathname === '') {
        pathname = '/'
    }
    var shouldBeActiveElements = document.querySelectorAll('.t282__menu a[href=\'' + url + '\'], ' + '.t282__menu a[href=\'' + url + '/\'], ' + '.t282__menu a[href=\'' + pathname + '\'], ' + '.t282__menu a[href=\'/' + pathname + '\'], ' + '.t282__menu a[href=\'' + pathname + '/\'], ' + '.t282__menu a[href=\'/' + pathname + '/\']' + (hash ? ', .t282__menu a[href=\'' + hash + '\']' : '') + (hash ? ', .t282__menu a[href=\'/' + hash + '\']' : '') + (hash ? ', .t282__menu a[href=\'' + hash + '/\']' : '') + (hash ? ', .t282__menu a[href=\'/' + hash + '/\']' : ''));
    var rec = document.getElementById('rec' + recid);
    var menuLinks = rec ? rec.querySelectorAll('.t282__menu a') : [];
    Array.prototype.forEach.call(menuLinks, function (link) {
        link.classList.remove('t-active')
    });
    Array.prototype.forEach.call(shouldBeActiveElements, function (link) {
        link.classList.add('t-active')
    })
}

function t282_appearMenu(recid) {
    var record = document.getElementById('rec' + recid);
    var menuBlock = record.querySelector('.t282');
    var fixedMenu = menuBlock ? menuBlock.querySelector('.t282__positionfixed') : null;
    if (!fixedMenu) return;
    var appearOffset = menuBlock.getAttribute('data-appearoffset');
    if (appearOffset && appearOffset.indexOf('vh') !== -1) {
        appearOffset = Math.floor((window.innerHeight * (parseInt(appearOffset) / 100)))
    }
    appearOffset = parseInt(appearOffset, 10);
    var menuHeight = fixedMenu.clientHeight;
    if (typeof appearOffset === 'number' && window.pageYOffset >= appearOffset) {
        if (fixedMenu.style.transform === 'translateY(-' + menuHeight + 'px)') {
            t282_slideUpElement(fixedMenu, menuHeight, 'toBottom')
        }
    } else if (fixedMenu.style.transform === 'translateY(0px)') {
        t282_slideUpElement(fixedMenu, menuHeight, 'toTop')
    } else {
        fixedMenu.style.transform = 'translateY(-' + menuHeight + 'px)';
        fixedMenu.style.opacity = '0'
    }
}

function t282_slideUpElement(menu, menuHeight, direction) {
    var diff = direction === 'toTop' ? 0 : menuHeight;
    var diffOpacity = direction === 'toTop' ? 1 : 0;
    var timerID = setInterval(function () {
        menu.style.transform = 'translateY(-' + diff + 'px)';
        menu.style.opacity = diffOpacity.toString();
        diffOpacity = direction === 'toTop' ? diffOpacity - 0.1 : diffOpacity + 0.1;
        diff = direction === 'toTop' ? diff + (menuHeight / 20) : diff - (menuHeight / 20);
        if (direction === 'toTop' && diff >= menuHeight) {
            menu.style.transform = 'translateY(-' + menuHeight + 'px)';
            menu.style.opacity = '0';
            clearInterval(timerID)
        }
        if (direction === 'toBottom' && diff <= 0) {
            menu.style.transform = 'translateY(0px)';
            menu.style.opacity = '1';
            clearInterval(timerID)
        }
    }, 10)
}